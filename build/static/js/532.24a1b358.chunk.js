"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[532],{7154:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(1523),s="NoTicketsFound_notickets__FqAs1",i=n(184),a=function(t){return(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("p",{children:t.text}),(0,i.jsx)(r.rU,{className:"btn",to:"/new-ticket",children:"Buy a Ticket"})]})}},679:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(2791),s=n(4880),i=n(1523),a="TicketItem_item__WglAm",c=n(184),o=function(t){return(0,c.jsxs)("li",{className:a,children:[(0,c.jsxs)("figure",{children:[(0,c.jsx)("blockquote",{children:(0,c.jsxs)("p",{children:[" ",(0,c.jsx)("span",{children:"From: "}),t.origin," ",(0,c.jsx)("span",{children:"To: "})," ",t.destination," "]})}),(0,c.jsx)("figcaption",{children:t.date}),(0,c.jsx)("figcaption",{children:t.hour})]}),(0,c.jsx)(i.rU,{className:"btn",to:"/tickets/".concat(t.id),children:"View Ticket"})]})},u=n(7213),l=function(t){var e,n,i=(0,s.useHistory)(),a=(0,s.useLocation)(),l="asc"===new URLSearchParams(a.search).get("sort"),d=(e=t.tickets,n=l,e.sort((function(t,e){return n?t.date>e.date?1:-1:t.date<e.date?1:-1})));return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)("span",{className:u.Z.titlu,children:"Tickets History"}),(0,c.jsx)("div",{className:u.Z.sorting,children:(0,c.jsxs)("button",{onClick:function(){i.push({pathname:a.pathname,search:"?sort=".concat(l?"desc":"asc")})},children:["Sort ",l?"Descending":"Ascending"," by Date"]})}),(0,c.jsx)("ul",{className:u.Z.list,children:d.map((function(t){return(0,c.jsx)(o,{id:t.id,origin:t.origin,destination:t.destination,date:t.date,hour:t.hour},t.id)}))})]})}},3995:function(t,e,n){var r=n(1413),s=n(4165),i=n(5861),a=n(885),c=n(2791);function o(t,e){return"SEND"===e.type?{data:null,error:null,status:"pending"}:"SUCCESS"===e.type?{data:e.responseData,error:null,status:"completed"}:"ERROR"===e.type?{data:null,error:e.errorMessage,status:"completed"}:t}e.Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,c.useReducer)(o,{status:e?"pending":null,data:null,error:null}),u=(0,a.Z)(n,2),l=u[0],d=u[1],h=(0,c.useCallback)(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d({type:"SEND"}),e.prev=1,e.next=4,t(n);case 4:r=e.sent,d({type:"SUCCESS",responseData:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d({type:"ERROR",errorMessage:e.t0.message||"Something went wrong!"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return(0,r.Z)({sendRequest:h},l)}},6853:function(t,e,n){n.d(e,{Bh:function(){return x},GP:function(){return k},HM:function(){return h},Lp:function(){return p},YD:function(){return o},yg:function(){return l}});var r=n(4165),s=n(1413),i=n(5861),a="https://react-http-c27a0-default-rtdb.firebaseio.com",c="https://railways-api-f9661-default-rtdb.firebaseio.com/";function o(t){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)((0,r.Z)().mark((function t(e){var n,i,c,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/tickets.json"));case 2:return n=t.sent,t.next=5,n.json();case 5:if(i=t.sent,n.ok){t.next=8;break}throw new Error(i.message||"Could not fetch tickets.");case 8:for(o in c=[],i)(u=(0,s.Z)({id:o},i[o])).user===e&&c.push(u);return t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,r.Z)().mark((function t(e){var n,i,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/tickets/").concat(e,".json"));case 2:return n=t.sent,t.next=5,n.json();case 5:if(i=t.sent,n.ok){t.next=8;break}throw new Error(i.message||"Could not fetch tickets.");case 8:return c=(0,s.Z)({id:e},i),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)((0,r.Z)().mark((function t(e){var n,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/tickets.json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(s=t.sent,n.ok){t.next=8;break}throw new Error(s.message||"Could not create ticket.");case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((0,r.Z)().mark((function t(e){var n,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(c,"/rides.json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(s=t.sent,n.ok){t.next=8;break}throw new Error(s.message||"Could not create ride.");case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)((0,r.Z)().mark((function t(e){var n,i,a,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(c,"/rides.json"));case 2:return n=t.sent,t.next=5,n.json();case 5:if(i=t.sent,n.ok){t.next=8;break}throw new Error(i.message||"Could not fetch tickets.");case 8:for(o in a=[],i)(u=(0,s.Z)({id:o},i[o])).origin===e.origin&&u.destination===e.destination&&a.push(u);return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return g.apply(this,arguments)}function g(){return(g=(0,i.Z)((0,r.Z)().mark((function t(){var e,n,s,i,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(c,"/railwayStation.json"));case 2:return e=t.sent,t.next=5,e.json();case 5:if(n=t.sent,e.ok){t.next=8;break}throw new Error(n.message||"Could not fetch tickets.");case 8:for(i in s=[],n)a=n[i],s.push(a);return t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},6532:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var r=n(2791),s=n(542),i=(n(679),n(3995)),a=n(6853),c=n(2556),o=n(7154),u=n(4880),l=n(7213),d=n(885),h="RideItem_item__Zjuvy",f=n(654),p=n(184),m=function(t){var e=t.children,n=t.onConfirm,r=t.onCancel;return(0,p.jsx)("div",{className:"confirmation-modal",children:(0,p.jsxs)("div",{className:"confirmation-modal-content",children:[e,(0,p.jsxs)("div",{className:"confirmation-modal-buttons",children:[(0,p.jsx)("button",{onClick:n,className:"confirmation-modal-yes",children:"Yes"}),(0,p.jsx)("button",{onClick:r,className:"confirmation-modal-no",children:"No"})]})]})})},x=function(t){var e=(0,i.Z)(a.HM),n=e.sendRequest,c=e.status,o=(0,s.k6)(),u=(0,r.useContext)(f.Z),l=(0,r.useState)(!1),x=(0,d.Z)(l,2),j=x[0],k=x[1];(0,r.useEffect)((function(){"completed"===c&&o.push("/tickets")}),[c]);return(0,p.jsxs)("li",{className:h,children:[(0,p.jsxs)("figure",{children:[(0,p.jsx)("blockquote",{children:(0,p.jsxs)("p",{children:[" ",(0,p.jsx)("span",{children:"From: "}),t.origin," ",(0,p.jsx)("span",{children:"To: "})," ",t.destination," "]})}),(0,p.jsxs)("figcaption",{children:["Date: ",t.date,"  Time: ",t.hour]})]}),(0,p.jsx)("button",{onClick:function(){k(!0)},className:"btn",children:"Buy Ticket"}),j&&(0,p.jsx)(m,{onConfirm:function(){k(!1),n({origin:t.origin,destination:t.destination,date:t.date,hour:t.hour,user:u.email,seat:Math.trunc(300*Math.random())+1})},onCancel:function(){k(!1)},children:"Are you sure you want to buy this ticket?"})]})},j=function(t){(0,u.useHistory)();var e,n,s=(0,u.useLocation)(),i=(new URLSearchParams(s.search).get("sort"),e=t.tickets,n="asc",e.sort((function(t,e){return n?t.hour>e.hour?1:-1:t.hour<e.hour?1:-1})));return console.log(i),(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("span",{className:l.Z.titlu,children:"Available Courses"}),(0,p.jsx)("ul",{className:l.Z.list,children:i.map((function(e){return(0,p.jsx)(x,{id:e.id,origin:e.origin,destination:e.destination,date:t.date,hour:e.hour},e.id)}))})]})},k=function(t){(0,s.$B)();var e=(0,s.UO)(),n=e.origin,u=e.destination,l=e.date,d=(0,i.Z)(a.Bh,!0),h=d.sendRequest,f=d.status,m=d.data,x=d.error;return(0,r.useEffect)((function(){h({origin:n,destination:u})}),[h,n,u]),"pending"===f?(0,p.jsx)("div",{className:"centered",children:(0,p.jsx)(c.Z,{})}):x?(0,p.jsx)("p",{className:"centered focused",children:x}):"completed"!==f||m&&0!==m.length?(console.log(m),(0,p.jsx)(r.Fragment,{children:(0,p.jsx)(j,{tickets:m,date:l})})):(0,p.jsx)(o.Z,{text:"No Courses Available"})}},7213:function(t,e){e.Z={list:"TicketList_list__bhyO4",sorting:"TicketList_sorting__Rnuus",titlu:"TicketList_titlu__tuzel"}}}]);
//# sourceMappingURL=532.24a1b358.chunk.js.map
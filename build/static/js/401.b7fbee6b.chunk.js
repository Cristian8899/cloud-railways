"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[401],{3995:function(e,t,n){var r=n(1413),s=n(4165),a=n(5861),c=n(885),i=n(2791);function o(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,i.useReducer)(o,{status:t?"pending":null,data:null,error:null}),u=(0,c.Z)(n,2),d=u[0],p=u[1],l=(0,i.useCallback)(function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,p({type:"SUCCESS",responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),p({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return(0,r.Z)({sendRequest:l},d)}},6853:function(e,t,n){n.d(t,{Bh:function(){return j},GP:function(){return k},HM:function(){return l},Lp:function(){return f},YD:function(){return o},yg:function(){return d}});var r=n(4165),s=n(1413),a=n(5861),c="https://react-http-c27a0-default-rtdb.firebaseio.com",i="https://railways-api-f9661-default-rtdb.firebaseio.com/";function o(e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(c,"/tickets.json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not fetch tickets.");case 8:for(o in i=[],a)(u=(0,s.Z)({id:o},a[o])).user===t&&i.push(u);return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(c,"/tickets/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not fetch tickets.");case 8:return i=(0,s.Z)({id:t},a),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(c,"/tickets.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw new Error(s.message||"Could not create ticket.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i,"/rides.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw new Error(s.message||"Could not create ride.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,c,o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i,"/rides.json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not fetch tickets.");case 8:for(o in c=[],a)(u=(0,s.Z)({id:o},a[o])).origin===t.origin&&u.destination===t.destination&&c.push(u);return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i,"/railwayStation.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Could not fetch tickets.");case 8:for(a in s=[],n)c=n[a],s.push(c);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},4401:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(2791),s=n(4880),a=n(542),c=n(184),i=n(3995),o=n(6853),u=n(2556),d=n(4165),p=n(5861),l=n(885),h=n(4702),f=n(2211),x=(0,h.ZF)({apiKey:"AIzaSyDb7xoSVKkLIuCpUlM4UCqoe-d56S02yY4",authDomain:"react-http-c27a0.firebaseapp.com",databaseURL:"https://react-http-c27a0-default-rtdb.firebaseio.com",projectId:"react-http-c27a0",storageBucket:"react-http-c27a0.appspot.com",messagingSenderId:"513843601111",appId:"1:513843601111:web:729be21eb9b5220195da92"}),j=(0,f.$C)(x),m=n(654),k=function(e){var t=(0,r.useState)(!1),n=(0,l.Z)(t,2),s=n[0],a=n[1],i=(0,r.useContext)(m.Z),o=function(){var t=(0,p.Z)((0,d.Z)().mark((function t(){var n;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(0,f.V1)(j,"sendEmail"),t.next=4,n({to:i.email,from:"cloudrailways01@gmail.com",origin:e.origin,destination:e.destination,date:e.date,hour:e.hour,seat:e.seat});case 4:a(!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error sending email:",t.t0);case 10:console.log(i.email);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"ticketPage",children:[(0,c.jsxs)("div",{className:"cardWrap",children:[(0,c.jsxs)("div",{class:"card cardLeft",children:[(0,c.jsxs)("h1",{children:["Cloud ",(0,c.jsx)("span",{children:"Railways"})]}),(0,c.jsxs)("div",{class:"title",children:[(0,c.jsx)("h2",{children:e.origin}),(0,c.jsx)("span",{children:"Origin"})]}),(0,c.jsxs)("div",{class:"name",children:[(0,c.jsx)("h2",{children:e.destination}),(0,c.jsx)("span",{children:"Destination"})]}),(0,c.jsxs)("div",{class:"seat",children:[(0,c.jsx)("h2",{children:e.date}),(0,c.jsx)("span",{children:"Date"})]}),(0,c.jsxs)("div",{class:"time",children:[(0,c.jsx)("h2",{children:e.hour}),(0,c.jsx)("span",{children:"time"})]})]}),(0,c.jsxs)("div",{class:"card cardRight",children:[(0,c.jsx)("div",{class:"eye"}),(0,c.jsxs)("div",{class:"number",children:[(0,c.jsx)("h3",{children:e.seat}),(0,c.jsx)("span",{children:"seat"})]}),(0,c.jsx)("div",{class:"barcode"})]})]}),s?(0,c.jsx)("p",{children:"Email sent successfully!"}):(0,c.jsx)("button",{onClick:o,children:(0,c.jsx)("span",{children:"Send on Email"})})]})},v=function(e){(0,a.$B)();var t=(0,s.useParams)().ticketId,n=(0,i.Z)(o.yg,!0),d=n.sendRequest,p=n.status,l=n.data,h=n.error;return(0,r.useEffect)((function(){d(t)}),[d,t]),"pending"===p?(0,c.jsx)("div",{className:"centered",children:(0,c.jsx)(u.Z,{})}):h?(0,c.jsx)("p",{children:"No Ticket found!"}):l.origin?(0,c.jsx)(r.Fragment,{children:(0,c.jsx)(k,{destination:l.destination,origin:l.origin,date:l.date,hour:l.hour,seat:l.seat})}):(0,c.jsx)("p",{children:"No ticket found"})}}}]);
//# sourceMappingURL=401.b7fbee6b.chunk.js.map